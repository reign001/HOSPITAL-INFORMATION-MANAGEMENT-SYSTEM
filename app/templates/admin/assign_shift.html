{% extends "base.html" %}
{% block content %}
<h2>ðŸ“‹ Assign Shifts for {{ today.strftime('%d %b %Y') }}</h2>

<!-- Form to assign shift -->
<form method="POST">
    <div class="form-section">
        <label>Employee</label>
        <select name="employee_id" required>
            {% for emp in employees %}
                <option value="{{ emp.id }}">{{ emp.full_name() }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-section">
        <label>Shift</label>
        <select name="shift" required>
            {% for shift in shifts %}
                <option value="{{ shift.name }}">{{ shift.value }}</option>
            {% endfor %}
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Assign Shift</button>
</form>

<hr>

<h3>Current Shift Roster</h3>
<div class="shift-container">
    {% for shift_name, assignments in shift_roster.items() %}
        <div class="shift-column">
            <h4>{{ shift_name }}</h4>
            {% if assignments %}
                <ul>
                    {% for assignment in assignments %}
                        <li>{{ assignment.employee.full_name() }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No employees assigned</p>
            {% endif %}
        </div>
    {% endfor %}
</div>

<style>
.shift-container { display: flex; gap: 20px; margin-top: 20px; }
.shift-column { flex: 1; background: #f9f9f9; padding: 15px; border-radius: 6px; }
.form-section { margin-bottom: 15px; }
label { display: block; font-weight: bold; margin-bottom: 5px; }
select, input { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; }
.btn-primary { background: #2563eb; color: white; padding: 10px 15px; border-radius: 6px; border: none; cursor: pointer; }
.btn-primary:hover { background: #1d4ed8; }
</style>
{% endblock %}
